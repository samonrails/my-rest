class AddZipCodes < ActiveRecord::Migration
  def change
    markets_with_zipcodes = {"Chicago" => ["60616", "60607", "60605", "60604", "60603", "60602", "60601", "60606", "60661", "60654", "60611", "60642", "60622", "60647", "60614", "60657"],
                             "Philadelphia" => ["19146", "19125", "19122", "19133", "19121", "19132", "19130", "19123", "19106", "19107", "19102", "19147", "19103", "19104"],
                             "New York" => ["10004", "10280", "10281", "10282", "10271", "10006", "10007", "10279", "10005", "10045", "10038", "10278", "10013", "10002", "10012", "10014", "10009", 
                             "10003", "10011", "10010", "10016", "10001", "10199", "10122", "10119", "10118", "10158", "10168", "10175", "10165", "10036", "10110", "10177", "10112", "10174", 
                             "10017", "10170", "10167", "10172", "10171", "10154", "10022", "10155", "10152", "10153", "10103", "10020", "10111", "10105", "10107", "10019"],
                             "NW Chicago Suburbs" => ["60074", "60067", "60195", "60192", "60169", "60194", "60193", "60172", "60157", "60143", "60191", "60007", "60173", "60008", "60004", "60056", "60070", "60005"]}
    markets_with_zipcodes.each do |market_name, zipcodes|
      market = Market.find_or_create_by_name(market_name)
      if market.present?
        zipcode_objekts = []
        zipcodes.each do |zipcode|
          zipcode_objekts << ZipCode.find_or_create_by_zipcode(zipcode)
        end
        market.zip_codes = zipcode_objekts
      else
        puts "#{market_name} market not found!"
      end
    end
  end
end

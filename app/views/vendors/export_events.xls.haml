.section-header
%h1
  Events for #{@vendor.name}

%h4 
  Generated: #{Time.now.strftime("%Y-%m-%d %I:%M:%S %p")}
  %br
  Generated By:
  - unless current_user.nil?
    #{current_user.name} (#{current_user.email})
  %br
  Start Date:
  - unless defined?(params[:searchable][:event_start_time_from]).nil?
    #{params[:searchable][:event_start_time_from]}
  %br
  End Date:
  - unless defined?(params[:searchable][:event_start_time_to]).nil?
    #{params[:searchable][:event_start_time_to]}

%br

.results
  %table.table.table-striped.table-condensed
    %thead
      %tr
        %th Event ID
        %th Date
        %th Time
        %th Contact
        %th Product
        %th Account
        %th Building
        %th Location
        %th Vendors
        %th Status

      - @events.each do |event|
        %tr
          %td= event.pretty_id
          %td= event.event_start_time.strftime("%Y-%m-%d")
          %td= event.event_start_time.strftime("%I:%M %p")
          %td= event.contact
          %td= event.product
          %td= event.account.name
          %td= event.location.building.name unless event.location.nil? or event.location.building.nil?
          %td= event.location.html_address unless event.location.nil?
          %td= event.event_vendors.map {|a| a.vendor.name}.join(", ")
          %td= event.status